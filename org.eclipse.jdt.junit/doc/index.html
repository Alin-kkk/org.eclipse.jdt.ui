<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Microsoft FrontPage 4.0">
   <title>Eclipse JUnit Plugin</title>
</head>
<body>

<h1>
<b><font color="#000000">Eclipse </font><font color="#00CC00">J</font><font color="#FF0000">U</font><font color="#000000">nit</font></b></h1>
<font color="#000000">last updated October 12st</font>
<p><font color="#000000">The Eclipse JUnit plugins allow you to run JUnit
tests inside of Eclipse. For more information about JUnit refer to <a href="http://www.junit.org">www.junit.org</a>.</font>
<p><font color="#000000">The Eclipse JUnit support allows you to run:</font>
<ul>
<li>
<font color="#000000"><b>Plain JUnit tests </b>- tests that don't require
an Eclipse workbench to run.</font></li>

<li>
<font color="#000000"><b>Eclipse Core JUnit plugin tests </b>- tests that
require an Eclipse workspace to run.</font></li>

<li>
<font color="#000000"><b>Eclipse UI JUnit plugin tests</b> - tests that require an
Eclipse workbench to run.</font></li>
</ul>

<h3>
<font color="#000000">Plugins</font></h3>
<font color="#000000">Eclipse JUnit support comes with the following plugins:</font>
<ul>
<li>
<font color="#000000">org.junit - contains the JUnit version 3.7. It is
needed for <b>developing</b> JUnit tests.</font></li>

<li>
<font color="#000000">org.eclipse.junit - contains support for <b>running plain
JUnit
tests</b> from Eclipse. It contributes a launcher for running plain JUnit
tests and a View for viewing the results of a test run.</font></li>

<li>
<font color="#000000">org.eclipse.core.junit - contains support for <b>running
Eclipse Core JUnit tests</b>. It contributes a launcher for running JUnit tests inside
of an Eclipse IPlatformRunnable.</font></li>

<li>
<font color="#000000">org.eclipse.jdt.junit - contains support for <b>running
Eclipse UI JUnit tests</b>. It contributes a launcher for running JUnit tests inside
of an Eclipse workbench and provides utility classes for implementing tests.</font></li>
</ul>

<h3>
<font color="#000000">Installing the JUnit Eclipse Support</font></h3>

<ol>
<li>
<font color="#000000">unzip&nbsp;</font> <a href="org.junit.zip">org.junit.zip</a>
and <a href="V02/org.eclipse.junit.zip">org.eclipse.junit.zip</a> to your
plugins directory.</li>

<li>
if you intend to develop Eclipse UI JUnit tests then unzip <a href="V02/org.eclipse.jdt.junit.zip">org.eclipse.jdt.junit.zip</a>
.</li>

<li>
if you intend also to develop Eclipse Core JUnit tests then unzip also <a href="V02/org.eclipse.core.junit.zip">org.eclipse.core.junit.zip</a></li>

<li>
restart Eclipse</li>
</ol>

<h3>
<font color="#000000">Developing and Running Plain JUnit Tests</font></h3>
<font color="#000000">To develop JUnit tests you create a Java project
with the junit.jar as a library on its build class path.</font>
<ol>
<li>
<font color="#000000">Create a Java project</font></li>

<li>
<font color="#000000">Open the project's build path property and add the
junit.jar contained in the org.junit plugin as an external JAR. If you
want to browse the JUnit source then attach the src.jar contained in the
org.junit.plugin to the junit.jar. Notice, to avoid absolute pathnames
on the buildpath you can reference the junit.jar relative to a class path
variable.</font></li>

<li>
<font color="#000000">Implement a TestCase subclass with some tests and
build them.</font></li>
</ol>
<font color="#000000">Running plain JUnit tests requires the following
steps:</font><img border="0" src="GoTo.jpg" align="right" width="315" height="502">
<ol>
<li>
<font color="#000000">select a junit.framework.TestCase class or a Class with a
static method &quot;Test suite()&quot; in the Packages view.</font></li>

<li>
<font color="#000000">execute <b>Run>JUnit Tests</b></font></li>
</ol>
<font color="#000000">This runs the JUnit tests and shows you the results
in a JUnit results view. See the figure below.</font><p><font color="#000000"><b>Important: </b>The JUnit results view shows
up in the current perspective. Therefore turn-off the preference Preferences>Debug>"Show
Debug Perspective when a program is launched in Run mode". Otherwise the
perspective is changed to the Debug perspective when you run JUnit tests
and you don't see the JUnit results view.</font><center>
<p></center>The test results are shown in a JUnit test result view. You can select a
failed
test or stack frame and execute <b>Go To File</b> to open the corresponding
source file in an editor in the workbench. There is also a context menu in the
failures and hierarchy tab that allows you to rerun a Test class..&nbsp;
<center>
</center>

<p>To track down problems you can run the JUnit tests in the debugger by
executing <b>Debug>JUnit Tests</b><p>.<img border="0" src="Debug.jpg" width="549" height="296">

<p>&nbsp;
<h3>
Developing and Running JUnit Eclipse Tests</h3>
To run JUnit tests for Eclipse plugins you have to execute <b>Run>JUnit UI Eclipse Plugin Tests
or Run&gt;JUnit Core Plugin Tests</b>. Notice, that you can<b> not</b> run ordinary JUnit
tests using this launchers.
<p>The Eclipse UI JUnit test launcher creates a TestWorkench.&nbsp; This is
a subclass of the Workench which will open, run a set of tests, and then
close itself automatically. Cause the tests are executed on top of an Eclipse
Workbench, you are allowed to instantiate views and perspetives and you can also
use other plugins through the plugin classloader of the tested plugin.&nbsp;
<p>The Eclipse Core JUnit test launcher creates a simple IPlatformRunnable. In
the runnable 's run method the tests will execute, and then the runnable
finishs. So can use the plugin classloader of the tested plugin and you can
instantiate other plugins, depending on your requirements specified in the
plugin 's &quot;plugin.xml&quot; file.
<h3>
Running JUnit Eclipse Tests from the Console</h3>
<p>
First: arguments are <b>not</b> case sensitive.</p>
You can also run Eclipse UI Tests outside of Eclipse from the console. To
do so you type in the following command in the Eclipse install directory.
<blockquote>
  <p>java -cp startup.jar org.eclipse.core.launcher.UIMain <b> -application</b>
  org.eclipse.jdt.junit.testapplication <b>-testPluginName </b>org.eclipse.ui.tests
<b>-className</b>
  org.eclipse.ui.tests.api.ApiTestSuite</p>
</blockquote>
And for Eclipse Core Tests type in the following command in the Eclipse install directory.
<blockquote>
  <p>java -cp startup.jar org.eclipse.core.launcher.UIMain <b> -application</b>
  org.eclipse.core.junit.testapplication <b>-testPluginName </b>org.eclipse.core.tests.harness
<b>-className</b>
  org.eclipse.core.tests.harness.ExampleWorkSpaceTest</p>
</blockquote>
In addition to the arguments provided by UIMain you <b>must</b> also pass the following
arguments:
<ul>

<li>
testPluginName - the name of the plugin that contains the tests.</li>

<li>
className - the name of your test suite class. This can either be a subclass
of&nbsp; TestSuite, TestCase, TestDecorator or a class with a static suite() method.</li>
</ul>
<p>And there are arguments that you <b>can</b> provide:</p>
<ul>
  <li>testListeners - you can provide a list of listeners. This listeners have
    to be implementations of junit.framework.TestListener or/and
    org.eclipse.jdt.junit.internal.ITestRunListener. This listeners have to be
    known by your testplugin 's classloader - you have to provide a library or
    require them if they are located in a different plugin. If the listeners are
    not of type TestListener or ITestRunListener the run will fail.&nbsp;<br>
    If there is no argument testListeners then
    org.eclipse.jdt.internal.TextTestListener is use, means console output known
    from junit.textui.TestRunner.&nbsp;</li>
  <li>debugging - standalone argument. Causes the TestRunner to produce debug
    output. This is especially ClassLoader (ClassCastExceptions,
    InstantiationException ....) output and connection output (Socket, Writer
    errors ....).</li>
  <li>&nbsp;</li>
</ul>
<b>Property Pages</b>
<ul>
  <li>In the global JUnit Test property page you can define the filter for the
    stacktrace, which you will see in the FailureView.</li>
</ul>
<p><img border="0" src="filter.jpg" width="584" height="256"></p>
<ul>
  <li>In the property page for the JUnit Eclipse Tests you can specify in which
    directories your plugins can be found. If you are selfhosting use only
    'Workspace'.</li>
</ul>
<p><img border="0" src="plugins.jpg" width="519" height="267"></p>
<p>There are known<b> limitations</b> with dialog and it 's settings:</p>
<ul>
  <li>you can uncheck all checkboxes -&gt; will fail for sure ;-(</li>
  <li>startup.jar is needed by the plugin for launching the testapplication. If
    a 'startup.jar' is included in the project of the testplugin then it will be
    taken, else a startup.jar is searched relativ to all specified directories
    containing plugins from top - down in the list. Take the tested plugin from
    the workspace will ensure that the testplugin is taken from the workspace.</li>
  <li>you can configure the launch so, that your test plugin and the used
    plugins are not in the workspace and therefore the stacktrace has not to be
    related with the source in the workspace, but I provide this as a feature.</li>
</ul>
Send Comments and PRs to <a href="mailto:Erich_Gamma@oti.com">Erich Gamma</a> .
</body>
</html>
